import requests
import random
from search_photo_tweets import TwitterAPI

list = ['1309460449503531008', '1309446090798673920', '1309403374672986113', '1309367489717886976', '1309341693372592129', '1309088352679923714', 
'1309103467819081732', '1309062357684039684', '1309033929018609664', '1308994935031500801', '1308980858091696128', '1308724472501870593', '1308690819881132032', '1308646000530132992', '1308663103513477123', '1308623981491048449', '1308404727072292864', '1308361577599438849', '1308348063677784064', '1308333712728236035', '1308301549584576513', '1308289350254256129', '1308261693110190081', '1308270875867660288', '1308016779508154369', '1308002257502232577', '1307993736639516672', '1307937000540925953', '1307968437629534208', '1307925132367679489', '1307912408195715072', '1307912402390851585', '1307896376911519745', '1307613289803702272', '1307631448568950784', '1307595675916402688', '1307655276397428736', '1307565485907537920', '1307549748916662275', '1307306720771727367', '1307296635982999552', '1307287575367806976', '1307213940342943744', '1307274667946774530', '1307234445728964608', '1307203292385087488', '1307187100383502336', '1306942968452931587', '1306931157368369152', '1306907675351949318']

url = f"https://api.twitter.com/2/tweets/{random.choice(list)}?tweet.fields=text&expansions=attachments.media_keys&media.fields=url"

headers = {
  'Authorization': r'Bearer AAAAAAAAAAAAAAAAAAAAAAALIAEAAAAAK2H%2FBuXtqJ%2BDBk9pOgDhmVFLN7A%3D5OrUtXJh8YKZjkA3nQDBx7i269M8Uk4Wx2rxO6FzL2HyDyPOmI',
  'Cookie': 'personalization_id="v1_1f5ekd4RNx9PiWQjlUMIjQ=="; guest_id=v1%3A160097449327710561'
}

response = requests.get(url, headers=headers)
print(response.status_code)
x = response.json()
text = x['data']['text']
image_url = x["includes"]["media"][0]["url"]
image = requests.get(str(image_url))
with open("sample.jpg", "wb") as s:
    s.write(image.content)

print(f"Dakshin Vrindavan\n{text}\n")